<!--
  @author            : Preeti
  @group             : TechMatrix Consulting
  @description       : 
  @created on        : 24-11-2025
  @last modified on  : 27-11-2025
  @last modified by  : Preeti
  @Contributor       : 
  @Version History   :
 * 
 * 
-->

<template>
    
    <div class="slds-grid slds-grid_align-end" style="padding-right: 12px;">
    <lightning-button
        label=" Swap Applicant "
        variant="brand"
        disabled={isDisable}
        onclick={openModal}>
    </lightning-button>
</div>

    <template if:true={isModalOpen}>
        <section class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
    
                <template if:true={isLoading}>
                    <lightning-spinner alternative-text="Processing Swap..." size="medium">
                    </lightning-spinner>
                </template>

                <!-- Header -->
                <header class="slds-modal__header slds-p-around_medium">
                    <h2 class="slds-text-heading_medium">
                        Swap Applicant
                    </h2>
                </header>

                <!-- Body -->
                <div class="slds-modal__content slds-p-around_medium">

                    <!-- STEP 1 -->
                    <template if:true={swapScreen}>
                        <!-- <div class="slds-box slds-box_x-small slds-m-bottom_medium"> -->

                            <h3 class="slds-text-title_bold slds-m-bottom_small">
                                Select Applicants
                            </h3>

                            <div class="slds-grid slds-gutters">

                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-combobox
                                        label="Select Applicant"
                                        options={applicantOptions}
                                        value={selectedA}
                                        onchange={handleSelectA} required>
                                    </lightning-combobox>

                                    <template if:true={selectedA}>
                                        <div class="slds-m-top_small slds-text-color_weak slds-text-title_bold">
                                            Applicant Type : 
                                            <span class="slds-text-color_success">{applicantAType}</span>
                                        </div>
                                    </template>
                                </div>

                                <div class="slds-col slds-size_1-of-2">
                                    <lightning-combobox
                                        label="Swap With"
                                        options={swapWithOptions}
                                        value={selectedB}
                                        onchange={handleSelectB} required>
                                    </lightning-combobox>

                                    <template if:true={selectedB}>
                                        <div class="slds-m-top_small slds-text-color_weak slds-text-title_bold">
                                            Applicant Type: 
                                            <span class="slds-text-color_success">{applicantBType}</span>
                                        </div>
                                    </template>
                                    </div>
                                    
                                    </div>
                                    <template if:true={typeSameError}>
                                        <div class="slds-text-color_error slds-m-top_x-small">
                                            Both applicants have the same Applicant Type, swap is not required.
                                        </div>
                                    </template>
                                    <!-- </div> -->
                                    </template>
                                    
                                    <!-- STEP 2 -->
                    <template if:true={swapCommentScreen}>
                        <!-- <div class="slds-box slds-box_x-small slds-m-bottom_medium"> -->

                            <h3 class="slds-text-title_bold slds-m-bottom_small">
                                Provide Swap Details
                            </h3>

                            <lightning-combobox
                                label="Swap Reason"
                                value={swapReason}
                                options={swapReasonOptions}
                                onchange={handleReasonChange} required>
                            </lightning-combobox>

                            <lightning-textarea
                                class="slds-m-top_medium"
                                label="Swap Comments"
                                value={swapComments}
                                onchange={handleCommentsChange} required>
                            </lightning-textarea>

                        <!-- </div> -->
                    </template>

                </div>

                <!-- Footer -->
                <footer class="slds-modal__footer slds-p-around_medium">
                    <lightning-button variant="neutral" label="Cancel" onclick={closeModal}></lightning-button>

                    <template if:true={swapScreen}>
                        <lightning-button class="slds-m-left_small" variant="brand" label="Next" onclick={goToStep2} disabled={disableNext}></lightning-button>
                    </template>

                    <template if:true={swapCommentScreen}>
                        <lightning-button class="slds-m-left_small" variant="neutral" label="Previous" onclick={goToStep1}></lightning-button>
                        <lightning-button class="slds-m-left_small" variant="brand" label="Confirm Swap" onclick={saveSwap}></lightning-button>
                    </template>
                </footer>

            </div>
        </section>

        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>